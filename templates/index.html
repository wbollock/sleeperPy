<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SleeperPy - Fantasy Football Tier Analysis for Sleeper</title>
    <meta name="description" content="Tier-based lineup recommendations for your Sleeper fantasy football leagues. See which players to start, bench, or pick up based on expert consensus rankings.">
    <meta name="keywords" content="fantasy football, sleeper, tiers, boris chen, lineup optimizer, dynasty, waiver wire, start sit">

    <!-- Open Graph -->
    <meta property="og:title" content="SleeperPy - Fantasy Football Tier Analysis">
    <meta property="og:description" content="Make smarter lineup decisions with tier-based player rankings for your Sleeper leagues.">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="SleeperPy">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="SleeperPy - Fantasy Football Tier Analysis">
    <meta name="twitter:description" content="Make smarter lineup decisions with tier-based player rankings for your Sleeper leagues.">

    <meta name="theme-color" content="#1e293b">
    <link rel="manifest" href="/static/manifest.json">

    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <link rel="stylesheet" href="/static/main.css">
    <link rel="stylesheet" href="/static/theme.css">
    <link rel="stylesheet" href="/static/cookie-consent.css">
    <link rel="stylesheet" href="/static/loading.css">
    <link rel="icon" type="image/svg+xml" href="/static/favicon.svg">
</head>
<body>
        <a href="#main-content" class="skip-link">Skip to main content</a>
        <header class="app-header" role="banner">
            <div class="header-content">
                <div class="logo-section">
                    <svg class="logo-icon" width="32" height="32" viewBox="0 0 32 32" fill="none">
                        <rect width="32" height="32" rx="8" fill="#0ea5e9"/>
                        <path d="M16 8L22 12V20L16 24L10 20V12L16 8Z" fill="white"/>
                        <circle cx="16" cy="16" r="3" fill="#0ea5e9"/>
                    </svg>
                    <h1>SleeperPy</h1>
                </div>
                <div style="display: flex; align-items: center; gap: 16px;">
                    <div class="theme-toggle">
                        <button class="theme-option active" data-theme="" onclick="switchTheme('')" title="Default">üåô</button>
                        <button class="theme-option" data-theme="dark" onclick="switchTheme('dark')" title="Dark">üåë</button>
                        <button class="theme-option" data-theme="light" onclick="switchTheme('light')" title="Light">‚òÄÔ∏è</button>
                    </div>
                    {{if .SavedUsername}}
                    <div class="user-info">
                        <span class="username-display">{{.SavedUsername}}</span>
                        <a href="/signout" class="signout-btn">Sign Out</a>
                    </div>
                    {{end}}
                </div>
            </div>
        </header>

        <main id="main-content" class="container" role="main">
            {{if .SavedUsername}}
            <!-- Returning User View -->
            <div class="hero-section returning-user">
                <h2 class="hero-title">Welcome back, {{.SavedUsername}}</h2>
                <p class="hero-subtitle">View your tiers and lineup recommendations.</p>

                <form id="userform" method="get" action="/lookup" class="hero-form">
                    <input type="hidden" name="username" value="{{.SavedUsername}}">
                    <button id="generateTiers" type="submit" class="cta-button primary">
                        View My Tiers
                    </button>
                    <a href="/signout" class="cta-button secondary">Use Different Username</a>
                </form>
            </div>
            {{else}}
            <!-- New User View -->
            <div class="hero-section">
                <h2 class="hero-title">Fantasy Football Tier Analysis for Sleeper</h2>
                <p class="hero-subtitle">See how your players rank with Boris Chen's weekly consensus tiers. Get lineup suggestions and find top free agents.</p>

                <form id="userform" method="get" action="/lookup" class="hero-form">
                    <div class="input-group">
                        <input id="inputButton" type="text" name="username" required placeholder="Enter your Sleeper username" aria-label="Sleeper username">
                    </div>
                    <button id="generateTiers" type="submit" class="cta-button primary">
                        View My Tiers
                    </button>
                </form>

                <p class="help-text">
                    <a href="https://support.sleeper.com/en/articles/1876011-account-settings" target="_blank" rel="noopener">How to find your username</a>
                    &nbsp;&middot;&nbsp;
                    <a href="/demo">See an example</a>
                </p>
            </div>

            <!-- Feature Cards -->
            <div class="features-grid">
                <div class="feature-card">
                    <h3 class="feature-title">Tier Rankings</h3>
                    <p class="feature-description">See your roster sorted by Boris Chen's expert consensus tiers, updated every week during the season.</p>
                </div>

                <div class="feature-card">
                    <h3 class="feature-title">Lineup Suggestions</h3>
                    <p class="feature-description">Spot better options on your bench with side-by-side tier comparisons for your starting lineup.</p>
                </div>

                <div class="feature-card">
                    <h3 class="feature-title">Free Agent Rankings</h3>
                    <p class="feature-description">Find the best available players in your league, sorted by tier ranking for smarter waiver claims.</p>
                </div>

                <div class="feature-card">
                    <h3 class="feature-title">Dynasty Support</h3>
                    <p class="feature-description">Track long-term player values with DynastyProcess rankings for keeper and dynasty leagues.</p>
                </div>
            </div>

            <!-- Info Footer -->
            <div class="info-footer">
                <span>Free ‚Ä¢ No signup ‚Ä¢ Open source</span>
            </div>
            {{end}}

            <div id="loading" style="display:none;text-align:center;margin-top:2em;">
                <div class="spinner"></div>
                <p class="loading-message" id="loadingMsg">Analyzing your team...</p>
            </div>
            <div id="output"></div>
        </main>

        <script>
        // Show loading spinner on form submit with rotating messages
        document.getElementById('userform').addEventListener('submit', function(evt) {
            document.getElementById('loading').style.display = 'block';
            document.getElementById('generateTiers').disabled = true;

            var messages = [
                "Fetching your leagues from Sleeper...",
                "Loading player data...",
                "Calculating tier rankings...",
                "Checking for lineup improvements...",
                "Scanning the waiver wire...",
                "Almost there..."
            ];
            var msgEl = document.getElementById('loadingMsg');
            var idx = 0;
            var interval = setInterval(function() {
                idx++;
                if (idx < messages.length) {
                    msgEl.textContent = messages[idx];
                } else {
                    clearInterval(interval);
                }
            }, 3000);
        });
        </script>
<script src="/static/theme.js"></script>
<script src="/static/cookie-consent.js"></script>

<footer class="site-footer">
    <div class="footer-content">
        <div class="footer-links">
            <a href="https://www.borischen.co/" target="_blank" rel="noopener">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M8 0L10 6H16L11 10L13 16L8 12L3 16L5 10L0 6H6L8 0Z"/>
                </svg>
                Boris Chen Tiers
            </a>
            <a href="https://github.com/wbollock/sleeperPy" target="_blank" rel="noopener">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/>
                </svg>
                GitHub
            </a>
            <a href="/pricing" rel="noopener">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M2 4a1 1 0 011-1h10a1 1 0 011 1v8a1 1 0 01-1 1H3a1 1 0 01-1-1V4z"/>
                    <path d="M8 7a1 1 0 100 2 1 1 0 000-2z"/>
                </svg>
                Pricing
            </a>
            <a href="/privacy" rel="noopener">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M8 1L3 3v4c0 3.5 2 6 5 8 3-2 5-4.5 5-8V3l-5-2z"/>
                </svg>
                Privacy
            </a>
            <a href="/terms" rel="noopener">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M4 2a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2V4a2 2 0 00-2-2H4zm0 2h8v8H4V4z"/>
                    <path d="M6 6h4v1H6V6zm0 2h4v1H6V8zm0 2h2v1H6v-1z"/>
                </svg>
                Terms
            </a>
            <a href="/about" rel="noopener">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-width="1.5" fill="none"/>
                    <path d="M8 4.5a1 1 0 110 2 1 1 0 010-2zM7 8h2v4H7V8z"/>
                </svg>
                About
            </a>
            <a href="/faq" rel="noopener">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-width="1.5" fill="none"/>
                    <path d="M6 6a2 2 0 114 0c0 1-1 1.5-1.5 2H7.5c.5-1 1.5-1 1.5-2a1 1 0 10-2 0H6zm2 4.5a.75.75 0 110 1.5.75.75 0 010-1.5z"/>
                </svg>
                FAQ
            </a>
        </div>
        <div class="footer-cta">
            <a href="https://buymeacoffee.com/wbollock" target="_blank" rel="noopener" class="coffee-btn">
                ‚òï Buy Me a Coffee
            </a>
            <span class="footer-love">
                If you like this project, <a href="https://github.com/wbollock" target="_blank" rel="noopener">star it on GitHub</a>
            </span>
        </div>
        <div class="footer-bottom">
            <p>Built by <a href="https://github.com/wbollock" target="_blank" rel="noopener">@wbollock</a> ‚Ä¢ Data from <a href="https://www.borischen.co" target="_blank" rel="noopener">Boris Chen</a> & <a href="https://dynastyprocess.com" target="_blank" rel="noopener">DynastyProcess</a></p>
        </div>
    </div>
</footer>
<script src="/static/loading.js"></script>
<script src="/static/theme.js"></script>
<script src="/static/cookie-consent.js"></script>
<script>
// Register service worker for PWA offline support
if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
        navigator.serviceWorker.register('/static/sw.js')
            .then((registration) => {
                console.log('[PWA] Service Worker registered:', registration.scope);

                // Check for updates periodically
                setInterval(() => {
                    registration.update();
                }, 60000); // Check every minute
            })
            .catch((error) => {
                console.log('[PWA] Service Worker registration failed:', error);
            });
    });
}
</script>
</body>
</html>
