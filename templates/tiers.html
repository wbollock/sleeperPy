<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{if .Username}}{{.Username}}'s Tiers - SleeperPy{{else}}SleeperPy Tiers{{end}}</title>
    <meta name="description" content="Fantasy football tier analysis and lineup recommendations for Sleeper leagues. Expert consensus rankings by Boris Chen.">
    <meta name="robots" content="noindex">

    <!-- Open Graph -->
    <meta property="og:title" content="SleeperPy - Fantasy Football Tier Analysis">
    <meta property="og:description" content="Tier-based lineup recommendations for your Sleeper fantasy football leagues.">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="SleeperPy">

    <meta name="theme-color" content="#1e293b">
    <link rel="manifest" href="/static/manifest.json">

    <link rel="stylesheet" href="/static/main.css">
    <link rel="stylesheet" href="/static/dynasty.css">
    <link rel="stylesheet" href="/static/theme.css">
    <link rel="stylesheet" href="/static/cookie-consent.css">
    <link rel="icon" type="image/svg+xml" href="/static/favicon.svg">
</head>
<body>
<a href="#main-content" class="skip-link">Skip to main content</a>
<header class="app-header" role="banner">
    <div class="header-content">
        <div class="logo-section">
            <a href="/" style="display:flex; align-items:center; gap:12px; text-decoration:none;">
                <svg class="logo-icon" width="32" height="32" viewBox="0 0 32 32" fill="none">
                    <rect width="32" height="32" rx="8" fill="#0ea5e9"/>
                    <path d="M16 8L22 12V20L16 24L10 20V12L16 8Z" fill="white"/>
                    <circle cx="16" cy="16" r="3" fill="#0ea5e9"/>
                </svg>
                <h1 style="color:#f1f5f9; margin:0;">SleeperPy</h1>
            </a>
        </div>
        <div style="display: flex; align-items: center; gap: 16px;">
            <div class="theme-toggle">
                <button class="theme-option active" data-theme="" onclick="switchTheme('')" title="Default">üåô</button>
                <button class="theme-option" data-theme="dark" onclick="switchTheme('dark')" title="Dark">üåë</button>
                <button class="theme-option" data-theme="light" onclick="switchTheme('light')" title="Light">‚òÄÔ∏è</button>
            </div>
            {{if .Username}}
            <div class="user-info">
                <span class="username-display">{{.Username}}</span>
                <a href="/signout" class="signout-btn">Sign Out</a>
            </div>
            {{end}}
        </div>
    </div>
</header>
<main id="main-content" class="main-content" role="main">
{{if .Error}}
<div style="max-width:600px; margin:3em auto; padding:2em; background:rgba(239,68,68,0.08); border:1px solid rgba(239,68,68,0.25); border-radius:12px; text-align:center;">
    <svg width="40" height="40" viewBox="0 0 24 24" fill="none" style="margin-bottom:12px;">
        <circle cx="12" cy="12" r="10" stroke="#ef4444" stroke-width="2"/>
        <path d="M12 8v4M12 16h.01" stroke="#ef4444" stroke-width="2" stroke-linecap="round"/>
    </svg>
    <p style="color:#fca5a5; font-size:1.1em; margin:0 0 1em 0; line-height:1.5;">{{.Error}}</p>
    <a href="/" style="display:inline-block; padding:10px 24px; background:#0ea5e9; color:#fff; border-radius:8px; text-decoration:none; font-weight:600; transition:background 0.2s;">Try Again</a>
</div>
{{else}}
{{with .Leagues}}
    {{/* Shareable link box removed as the URL is self-evident */}}
{{end}}

<script src="/static/tiers.js"></script>

{{$leagueCount := len .Leagues}}
<div class="league-selector-container">
    <div class="league-selector">
        <button class="league-dropdown-btn" onclick="toggleLeagueDropdown()">
            <span class="current-league-name" id="currentLeagueName">{{(index .Leagues 0).LeagueName}}</span>
            <span class="league-count">({{$leagueCount}} leagues)</span>
            <span class="dropdown-arrow">‚ñº</span>
        </button>
        <div class="league-dropdown-menu" id="leagueDropdown" style="display:none;">
            <input type="text" class="league-search" id="leagueSearch" placeholder="Search leagues..." onkeyup="filterLeagues()">
            <div class="league-options" id="leagueOptions">
                {{/* Favorites group */}}
                <div class="league-group" id="favorites-group" style="display:none;">
                    <div class="league-group-header">‚≠ê Favorites</div>
                </div>

                {{/* Group dynasty leagues */}}
                <div class="league-group" id="dynasty-group">
                    <div class="league-group-header">üèÜ Dynasty Leagues</div>
                    {{range $i, $l := .Leagues}}
                        {{if $l.IsDynasty}}
                        <button class="league-option {{if eq $i 0}}active{{end}}" data-league-id="league{{$i}}" data-league-name="{{$l.LeagueName}}" onclick="selectLeague(event, 'league{{$i}}', '{{$l.LeagueName}}')">
                            <span class="league-option-name">{{$l.LeagueName}}</span>
                            <span class="league-option-actions">
                                <span class="league-option-type">({{$l.Scoring}})</span>
                                <span class="favorite-star" onclick="toggleFavorite(event, 'league{{$i}}', '{{$l.LeagueName}}')" title="Add to favorites">‚òÜ</span>
                            </span>
                        </button>
                        {{end}}
                    {{end}}
                </div>

                {{/* Group redraft leagues */}}
                <div class="league-group" id="redraft-group">
                    <div class="league-group-header">üìä Redraft Leagues</div>
                    {{range $i, $l := .Leagues}}
                        {{if not $l.IsDynasty}}
                        <button class="league-option {{if eq $i 0}}active{{end}}" data-league-id="league{{$i}}" data-league-name="{{$l.LeagueName}}" onclick="selectLeague(event, 'league{{$i}}', '{{$l.LeagueName}}')">
                            <span class="league-option-name">{{$l.LeagueName}}</span>
                            <span class="league-option-actions">
                                <span class="league-option-type">({{$l.Scoring}})</span>
                                <span class="favorite-star" onclick="toggleFavorite(event, 'league{{$i}}', '{{$l.LeagueName}}')" title="Add to favorites">‚òÜ</span>
                            </span>
                        </button>
                        {{end}}
                    {{end}}
                </div>
            </div>
        </div>
    </div>
</div>
<div class="league-contents">
    {{range $i, $l := .Leagues}}
        <div class="league-content" id="league{{$i}}" style="display:{{if eq $i 0}}block{{else}}none{{end}};">
            <div class="league-info-bar">
                <span>{{$l.LeagueSize}}-team</span>
                <span class="league-info-sep">¬∑</span>
                <span>{{$l.Scoring}}</span>
                {{if $l.IsDynasty}}<span class="league-info-sep">¬∑</span><span class="dynasty-badge">Dynasty</span>{{end}}
                {{if $l.RosterSlots}}<span class="league-info-sep">¬∑</span><span class="league-info-slots">{{$l.RosterSlots}}</span>{{end}}
            </div>
            {{if $l.IsDynasty}}
            <div class="mode-toggle-container">
                <div class="mode-toggle">
                    <button class="mode-btn" onclick="switchMode(event, {{$i}}, 'inseason')">In-Season</button>
                    <button class="mode-btn active" onclick="switchMode(event, {{$i}}, 'dynasty')">Dynasty</button>
                </div>
                <div class="mode-description">
                    <span class="inseason-desc" style="display:none;">Weekly matchups & tier-based recommendations</span>
                    <span class="dynasty-desc">Long-term value & dynasty toolkit</span>
                </div>
            </div>

            <div class="league-grid-container">
                <div class="roster-card">
            {{end}}
            <table class="sortable-table pretty-table">
                <thead>
                    <tr>
                        <th>Position</th>
                        <th>Player</th>
                        {{if $l.IsDynasty}}
                        <th class="inseason-only" style="display:none;">Tier</th>
                        <th class="dynasty-only">Age</th>
                        <th>Dynasty Value</th>
                        {{else}}
                        <th>Tier</th>
                        {{end}}
                    </tr>
                </thead>
                <tbody>
                {{range $l.Starters}}
                    <tr{{if eq .Tier 1}} class="tier1"{{else if .IsTierWorseThanBench}} class="tier-worse"{{end}}>
                        <td>{{.Pos}}</td>
                        <td>{{if eq .Tier 1}}<span class="tier1-star">‚òÖ</span> {{end}}{{.Name | safe}}</td>
                        {{if $l.IsDynasty}}
                        <td class="inseason-only" style="display:none;">{{.Tier}}{{if .IsFlex}} <span style="background:#7bb0ff;color:#1a1f2e;padding:2px 5px;border-radius:3px;font-size:0.85em;font-weight:bold;">FLEX</span>{{else if .IsSuperflex}} <span style="background:#7bb0ff;color:#1a1f2e;padding:2px 5px;border-radius:3px;font-size:0.85em;font-weight:bold;">SF</span>{{end}}</td>
                        <td class="dynasty-only">{{if .Age}}{{.Age}}{{else}}-{{end}}</td>
                        <td>{{if .DynastyValue}}{{.DynastyValue}}{{else}}-{{end}}</td>
                        {{else}}
                        <td>{{.Tier}}{{if .IsFlex}} <span style="background:#7bb0ff;color:#1a1f2e;padding:2px 5px;border-radius:3px;font-size:0.85em;font-weight:bold;">FLEX</span>{{else if .IsSuperflex}} <span style="background:#7bb0ff;color:#1a1f2e;padding:2px 5px;border-radius:3px;font-size:0.85em;font-weight:bold;">SF</span>{{end}}</td>
                        {{end}}
                    </tr>
                {{end}}
                {{range $l.Unranked}}
                    <tr>
                        <td>
                            {{if eq .Pos "FLEX"}}<span style="color:#7bb0ff;font-weight:bold;">FLEX</span>{{else if eq .Pos "SUPERFLEX"}}<span style="color:#7bb0ff;font-weight:bold;">SUPERFLEX</span>{{else}}{{.Pos}}{{end}}
                        </td>
                        <td>{{.Name | safe}}</td>
                        {{if $l.IsDynasty}}
                        <td class="inseason-only" style="display:none;">{{.Tier}}</td>
                        <td class="dynasty-only">{{if .Age}}{{.Age}}{{else}}-{{end}}</td>
                        <td>-</td>
                        {{else}}
                        <td>{{.Tier}}</td>
                        {{end}}
                    </tr>
                {{end}}
                </tbody>
                <tfoot>
                    <tr class="{{if $l.IsDynasty}}inseason-only{{end}}"><td colspan="{{if $l.IsDynasty}}4{{else}}3{{end}}" class="summary" style="padding:16px;"><b>Average Tier: {{$l.AvgTier}}</b></td></tr>
                    {{if $l.HasMatchups}}
                    <tr class="{{if $l.IsDynasty}}inseason-only{{end}}"><td colspan="{{if $l.IsDynasty}}4{{else}}3{{end}}" class="summary" style="padding:16px;"><b>Opponent Average Tier: {{$l.AvgOppTier}}</b></td></tr>
                    <tr class="{{if $l.IsDynasty}}inseason-only{{end}}">
                        <td colspan="{{if $l.IsDynasty}}4{{else}}3{{end}}" style="padding:12px 0; background:transparent; border:none; text-align:center;">
                            <div class="winprob-row">
                                <span class="winprob-label">Win Probability</span>
                                <span class="winprob-bar-wrap">
                                    <span class="winprob-bar-bg">
                                        <span class="winprob-bar" style="width: {{parseWinProb $l.WinProb}}%; background: {{winProbColor $l.WinProb}};"></span>
                                    </span>
                                </span>
                                <span class="winprob-badge" style="background: {{winProbColor $l.WinProb}};">
                                    {{parseWinProb $l.WinProb}}%
                                </span>
                                <span class="winprob-emoji">{{parseWinEmoji $l.WinProb}}</span>
                            </div>
                        </td>
                    </tr>
                    {{else}}
                    <tr class="{{if $l.IsDynasty}}inseason-only{{end}}"><td colspan="{{if $l.IsDynasty}}4{{else}}3{{end}}" class="summary" style="padding:16px;font-style:italic;color:#9fb3d4;">Offseason - No active matchups</td></tr>
                    {{end}}
                    {{if $l.IsDynasty}}
                    <tr class="dynasty-only">
                        <td colspan="4" class="summary" style="padding:16px;">
                            <b>Total Roster Value: {{$l.TotalRosterValue}}</b><br>
                            <b style="margin-top:8px;display:block;">Your Team's Average Age: {{printf "%.1f" $l.UserAvgAge}} years</b>
                        </td>
                    </tr>
                    {{end}}
                    <tr><th colspan="{{if $l.IsDynasty}}4{{else}}3{{end}}" class="bench-header" style="padding-top:24px; padding-bottom:16px;">Bench</th></tr>
                    {{range $l.Bench}}
                        <tr{{if eq .Tier 1}} class="tier1"{{else if .ShouldSwapIn}} class="swap-candidate"{{end}}>
                            <td>{{.Pos}}</td>
                            <td>{{if eq .Tier 1}}<span class="tier1-star">‚òÖ</span> {{end}}{{if .ShouldSwapIn}}<span class="swap-icon">‚áÑ</span> {{end}}{{.Name | safe}}</td>
                            {{if $l.IsDynasty}}
                            <td class="inseason-only" style="display:none;">{{.Tier}}{{if .IsFlex}} <span style="background:#7bb0ff;color:#1a1f2e;padding:2px 5px;border-radius:3px;font-size:0.85em;font-weight:bold;">FLEX</span>{{end}}</td>
                            <td class="dynasty-only">{{if .Age}}{{.Age}}{{else}}-{{end}}</td>
                            <td>{{if .DynastyValue}}{{.DynastyValue}}{{else}}-{{end}}</td>
                            {{else}}
                            <td>{{.Tier}}{{if .IsFlex}} <span style="background:#7bb0ff;color:#1a1f2e;padding:2px 5px;border-radius:3px;font-size:0.85em;font-weight:bold;">FLEX</span>{{end}}</td>
                            {{end}}
                        </tr>
                    {{end}}
                    {{range $l.BenchUnranked}}
                        <tr>
                            <td>{{.Pos}}</td>
                            <td>{{.Name | safe}}</td>
                            {{if $l.IsDynasty}}
                            <td class="inseason-only">{{.Tier}}</td>
                            <td class="dynasty-only" style="display:none;">{{if .Age}}{{.Age}}{{else}}-{{end}}</td>
                            <td>-</td>
                            {{else}}
                            <td>{{.Tier}}</td>
                            {{end}}
                        </tr>
                    {{end}}
                    <tr><td colspan="{{if $l.IsDynasty}}4{{else}}3{{end}}" style="padding-top:8px;font-size:0.9em;color:#9fb3d4;font-style:italic;">Note: RB/WR/TE bench players ranked using FLEX tiers</td></tr>
                </tfoot>
            </table>

            {{if $l.IsDynasty}}
                </div>

                <div class="dynasty-toolkit dynasty-only">
                    {{if $l.PlayerNewsFeed}}
                    <div class="toolkit-card collapseable">
                        <div class="card-header" onclick="toggleSection('player-news-{{$i}}')">
                            <span class="card-title">
                                Player News
                                <span class="news-count">{{len $l.PlayerNewsFeed}}</span>
                            </span>
                            <span class="collapse-icon" id="player-news-{{$i}}-icon">‚ñº</span>
                        </div>
                        <div class="card-content" id="player-news-{{$i}}-content">
                            <div class="news-feed">
                                {{range $l.PlayerNewsFeed}}
                                <div class="news-item{{if .InjuryStatus}} news-injury{{end}}">
                                    <div class="news-header">
                                        <span class="news-player">
                                            {{.PlayerName}} ({{.Position}})
                                            {{if .IsStarter}}<span class="starter-badge">‚≠ê</span>{{end}}
                                        </span>
                                        <span class="news-time">{{formatTime .Timestamp}}</span>
                                    </div>
                                    {{if .InjuryStatus}}
                                    <div class="news-injury-status">{{.InjuryStatus}}</div>
                                    {{end}}
                                    {{if .NewsText}}
                                    <div class="news-text">{{.NewsText}}</div>
                                    {{else if .InjuryBodyPart}}
                                    <div class="news-text">{{.InjuryBodyPart}}{{if .InjuryNotes}} - {{.InjuryNotes}}{{end}}</div>
                                    {{end}}
                                    {{if .Source}}
                                    <div class="news-source">Source: {{.Source}}</div>
                                    {{end}}
                                </div>
                                {{end}}
                            </div>
                        </div>
                    </div>
                    {{else}}
                    <div class="toolkit-card collapseable">
                        <div class="card-header" onclick="toggleSection('player-news-{{$i}}')">
                            <span class="card-title">
                                Player News
                                <span class="news-count">0</span>
                            </span>
                            <span class="collapse-icon" id="player-news-{{$i}}-icon">‚ñº</span>
                        </div>
                        <div class="card-content" id="player-news-{{$i}}-content">
                            <div class="empty-state">
                                <div class="empty-state-icon">üì∞</div>
                                <div class="empty-state-title">No Recent News</div>
                                <div class="empty-state-text">
                                    All your players are flying under the radar. Check back later for updates.
                                </div>
                            </div>
                        </div>
                    </div>
                    {{end}}

                    <div class="toolkit-card collapseable">
                        <div class="card-header" onclick="toggleSection('breakout-{{$i}}')">
                            <span class="card-title">
                                Breakout Candidates
                                <span class="breakout-count">{{len $l.BreakoutCandidates}}</span>
                            </span>
                            <span class="collapse-icon" id="breakout-{{$i}}-icon">‚ñº</span>
                        </div>
                        <div class="card-content" id="breakout-{{$i}}-content">
                            {{if $l.BreakoutCandidates}}
                            <div class="breakout-desc">Young players with high upside potential (age &lt; 25, value &gt; 500)</div>
                            <div class="player-list">
                                {{range $l.BreakoutCandidates}}
                                <div class="player-card breakout-card">
                                    <div class="player-card-header">
                                        <span class="player-card-name">{{.Name | safe}}</span>
                                        <span class="player-card-age">Age {{.Age}}</span>
                                    </div>
                                    <div class="player-card-details">
                                        <span class="player-card-pos">{{.Pos}}</span>
                                        <span class="player-card-value">Value: {{.DynastyValue}}</span>
                                    </div>
                                </div>
                                {{end}}
                            </div>
                            {{else}}
                            <div class="empty-state">
                                <div class="empty-state-icon">üåü</div>
                                <div class="empty-state-title">No Breakout Candidates</div>
                                <div class="empty-state-text">
                                    You don't have young bench players (age &lt; 25) with significant value (&gt; 500). Consider adding high-upside rookies or young players to your roster!
                                </div>
                            </div>
                            {{end}}
                        </div>
                    </div>

                    <div class="toolkit-card collapseable">
                        <div class="card-header" onclick="toggleSection('aging-{{$i}}')">
                            <span class="card-title">
                                Aging Players Alert
                                <span class="aging-count">{{len $l.AgingPlayers}}</span>
                            </span>
                            <span class="collapse-icon" id="aging-{{$i}}-icon">‚ñº</span>
                        </div>
                        <div class="card-content" id="aging-{{$i}}-content">
                            {{if $l.AgingPlayers}}
                            <div class="aging-desc">Players approaching decline - consider selling while value is high</div>
                            <div class="player-list">
                                {{range $l.AgingPlayers}}
                                <div class="player-card aging-card">
                                    <div class="player-card-header">
                                        <span class="player-card-name">{{.Name | safe}}</span>
                                        <span class="player-card-age aging-age">Age {{.Age}}</span>
                                    </div>
                                    <div class="player-card-details">
                                        <span class="player-card-pos">{{.Pos}}</span>
                                        <span class="player-card-value">Value: {{.DynastyValue}}</span>
                                    </div>
                                    <div class="aging-warning">
                                        {{if eq .Pos "RB"}}‚ö†Ô∏è RBs decline sharply after age 28
                                        {{else if or (eq .Pos "WR") (eq .Pos "TE")}}‚ö†Ô∏è Pass catchers typically decline after 30
                                        {{else if eq .Pos "QB"}}‚ö†Ô∏è QBs can play longer but decline risk increases
                                        {{end}}
                                    </div>
                                </div>
                                {{end}}
                            </div>
                            {{else}}
                            <div class="empty-state">
                                <div class="empty-state-icon">‚úÖ</div>
                                <div class="empty-state-title">No Aging Concerns</div>
                                <div class="empty-state-text">
                                    Your valuable players are in their prime! No players currently flagged as approaching decline based on position-specific age thresholds.
                                </div>
                            </div>
                            {{end}}
                        </div>
                    </div>

                    <div class="toolkit-card collapseable">
                        <div class="card-header" onclick="toggleSection('transactions-{{$i}}')">
                            <span class="card-title">
                                Recent Transactions
                                <span class="transactions-count">{{len $l.RecentTransactions}}</span>
                            </span>
                            <span class="collapse-icon" id="transactions-{{$i}}-icon">‚ñº</span>
                        </div>
                        <div class="card-content" id="transactions-{{$i}}-content">
                            {{if $l.RecentTransactions}}
                            <div class="transaction-filters">
                                <button class="filter-btn active" onclick="filterTransactions(event, {{$i}}, 'all')">All</button>
                                <button class="filter-btn" onclick="filterTransactions(event, {{$i}}, 'trade')">üìä Trades</button>
                                <button class="filter-btn" onclick="filterTransactions(event, {{$i}}, 'waiver')">üìã Waivers</button>
                                <button class="filter-btn" onclick="filterTransactions(event, {{$i}}, 'free_agent')">‚ûï Free Agents</button>
                            </div>
                            <div class="transactions-list" id="transactions-list-{{$i}}">
                                {{range $l.RecentTransactions}}
                                <div class="transaction-item transaction-{{.Type}}">
                                    <div class="transaction-header">
                                        <span class="transaction-type">{{if eq .Type "trade"}}üìä Trade{{else if eq .Type "waiver"}}üìã Waiver{{else}}‚ûï Free Agent{{end}}</span>
                                        <span class="transaction-time">{{formatTime .Timestamp}}</span>
                                    </div>

                                    {{if eq .Type "trade"}}
                                        {{if and .Team1 .Team2}}
                                        <div class="trade-details">
                                            <div class="trade-side">
                                                <div class="trade-team">{{.Team1}}</div>
                                                <div class="trade-gave">
                                                    {{if .Team1Gave}}
                                                        <span class="trade-label gave">Gave:</span>
                                                        {{range $idx, $player := .Team1Gave}}{{if $idx}}, {{end}}{{$player}}{{end}}
                                                    {{else}}
                                                        <span class="trade-label got">Got:</span>
                                                        {{range $idx, $player := .Team2Gave}}{{if $idx}}, {{end}}{{$player}}{{end}}
                                                    {{end}}
                                                </div>
                                            </div>
                                            <div class="trade-divider">‚áÑ</div>
                                            <div class="trade-side">
                                                <div class="trade-team">{{.Team2}}</div>
                                                <div class="trade-gave">
                                                    {{if .Team2Gave}}
                                                        <span class="trade-label gave">Gave:</span>
                                                        {{range $idx, $player := .Team2Gave}}{{if $idx}}, {{end}}{{$player}}{{end}}
                                                    {{else}}
                                                        <span class="trade-label got">Got:</span>
                                                        {{range $idx, $player := .Team1Gave}}{{if $idx}}, {{end}}{{$player}}{{end}}
                                                    {{end}}
                                                </div>
                                            </div>
                                        </div>
                                        {{else}}
                                        <div class="transaction-desc">{{.Description}}</div>
                                        {{end}}
                                    {{else if eq .Type "waiver"}}
                                        <div class="waiver-details">
                                            {{if .TeamNames}}
                                            <div class="waiver-team">{{index .TeamNames 0}}</div>
                                            {{end}}
                                            <div class="waiver-action">
                                                <span class="waiver-label got">‚úÖ Added:</span> {{.AddedPlayer}}
                                            </div>
                                            {{if .DroppedPlayer}}
                                            <div class="waiver-action">
                                                <span class="waiver-label gave">‚ùå Dropped:</span> {{.DroppedPlayer}}
                                            </div>
                                            {{end}}
                                        </div>
                                    {{else}}
                                        <div class="waiver-details">
                                            {{if .TeamNames}}
                                            <div class="waiver-team">{{index .TeamNames 0}}</div>
                                            {{end}}
                                            <div class="waiver-action">
                                                <span class="waiver-label got">‚úÖ Added:</span> {{.AddedPlayer}}
                                            </div>
                                            {{if .DroppedPlayer}}
                                            <div class="waiver-action">
                                                <span class="waiver-label gave">‚ùå Dropped:</span> {{.DroppedPlayer}}
                                            </div>
                                            {{end}}
                                        </div>
                                    {{end}}
                                </div>
                                {{end}}
                            </div>
                            {{else}}
                            <div class="empty-state">
                                <div class="empty-state-icon">üìã</div>
                                <div class="empty-state-title">No Recent Activity</div>
                                <div class="empty-state-text">
                                    Your league has been quiet lately. No trades, waiver claims, or free agent moves in the past 4 weeks.
                                </div>
                            </div>
                            {{end}}
                        </div>
                    </div>

                    {{if or (gt (len $l.LeagueTrends.MostActiveTeams) 0) (gt (len $l.LeagueTrends.HotWaiverPlayers) 0)}}
                    <div class="toolkit-card collapseable">
                        <div class="card-header" onclick="toggleSection('league-trends-{{$i}}')">
                            <span class="card-title">League Trends</span>
                            <span class="collapse-icon" id="league-trends-{{$i}}-icon">‚ñº</span>
                        </div>
                        <div class="card-content" id="league-trends-{{$i}}-content">
                            <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px;margin-bottom:20px;">
                                <div style="background:rgba(123,176,255,0.08);border:1px solid rgba(123,176,255,0.2);border-radius:8px;padding:16px;text-align:center;">
                                    <div style="font-size:2em;font-weight:700;color:#7bb0ff;">{{$l.LeagueTrends.TradeVolume}}</div>
                                    <div style="font-size:0.9em;color:#9fb3d4;margin-top:4px;">Trades (4 weeks)</div>
                                </div>
                                <div style="background:rgba(255,157,92,0.08);border:1px solid rgba(255,157,92,0.2);border-radius:8px;padding:16px;text-align:center;">
                                    <div style="font-size:2em;font-weight:700;color:#ff9d5c;">{{$l.LeagueTrends.WaiverVolume}}</div>
                                    <div style="font-size:0.9em;color:#9fb3d4;margin-top:4px;">Waiver Claims (4 weeks)</div>
                                </div>
                            </div>

                            {{if gt (len $l.LeagueTrends.MostActiveTeams) 0}}
                            <div style="margin-bottom:24px;">
                                <div style="font-weight:600;color:#c5d5f0;margin-bottom:12px;font-size:0.95em;">Most Active Teams</div>
                                <table class="age-chart-table">
                                    <thead>
                                        <tr>
                                            <th style="text-align:left;">Team</th>
                                            <th>Transactions</th>
                                            <th>Trades</th>
                                            <th>Waivers</th>
                                            <th>Activity</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                    {{range $l.LeagueTrends.MostActiveTeams}}
                                        <tr>
                                            <td style="text-align:left;">{{.TeamName}}</td>
                                            <td>{{.Transactions}}</td>
                                            <td>{{.Trades}}</td>
                                            <td>{{.WaiverClaims}}</td>
                                            <td>
                                                {{if eq .ActivityLevel "Very Active"}}
                                                    <span style="color:#3ae87a;font-weight:600;">Very Active</span>
                                                {{else if eq .ActivityLevel "Active"}}
                                                    <span style="color:#7bb0ff;font-weight:600;">Active</span>
                                                {{else}}
                                                    <span style="color:#9fb3d4;">Quiet</span>
                                                {{end}}
                                            </td>
                                        </tr>
                                    {{end}}
                                    </tbody>
                                </table>
                            </div>
                            {{end}}

                            {{if gt (len $l.LeagueTrends.HotWaiverPlayers) 0}}
                            <div style="margin-bottom:24px;">
                                <div style="font-weight:600;color:#c5d5f0;margin-bottom:12px;font-size:0.95em;">Hot Waiver Players</div>
                                <div style="font-size:0.85em;color:#9fb3d4;font-style:italic;margin-bottom:12px;">Players claimed multiple times in the past 4 weeks</div>
                                <table class="age-chart-table">
                                    <thead>
                                        <tr>
                                            <th style="text-align:left;">Player</th>
                                            <th>Pos</th>
                                            <th>Claims</th>
                                            <th>Last Claimed</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                    {{range $l.LeagueTrends.HotWaiverPlayers}}
                                        <tr>
                                            <td style="text-align:left;">{{.PlayerName}}</td>
                                            <td>{{.Position}}</td>
                                            <td style="font-weight:600;color:#ff9d5c;">{{.ClaimCount}}</td>
                                            <td style="color:#9fb3d4;font-size:0.9em;">{{.LastClaimed}}</td>
                                        </tr>
                                    {{end}}
                                    </tbody>
                                </table>
                            </div>
                            {{end}}

                            {{if $l.LeagueTrends.PositionScarcity}}
                            <div>
                                <div style="font-weight:600;color:#c5d5f0;margin-bottom:12px;font-size:0.95em;">Position Scarcity</div>
                                <div style="font-size:0.85em;color:#9fb3d4;font-style:italic;margin-bottom:12px;">Available players by position on waivers</div>
                                <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(100px,1fr));gap:12px;">
                                    {{range $pos, $count := $l.LeagueTrends.PositionScarcity}}
                                    <div style="background:rgba(30,38,54,0.5);border:1px solid rgba(123,176,255,0.15);border-radius:6px;padding:12px;text-align:center;">
                                        <div style="font-size:1.5em;font-weight:700;color:#7bb0ff;">{{$count}}</div>
                                        <div style="font-size:0.85em;color:#9fb3d4;margin-top:4px;">{{$pos}}</div>
                                    </div>
                                    {{end}}
                                </div>
                            </div>
                            {{end}}
                        </div>
                    </div>
                    {{end}}

                    {{if $l.DraftPicks}}
                    <div class="toolkit-card collapseable">
                        <div class="card-header" onclick="toggleSection('draft-picks-{{$i}}')">
                            <span class="card-title">Draft Capital</span>
                            <span class="collapse-icon" id="draft-picks-{{$i}}-icon">‚ñº</span>
                        </div>
                        <div class="card-content" id="draft-picks-{{$i}}-content">
                            <div class="draft-picks-grid">
                                {{range $l.DraftPicks}}
                                <div class="draft-pick-card{{if .OriginalName}} traded-pick{{end}}">
                                    <div class="pick-year">{{.Year}}</div>
                                    <div class="pick-round">Round {{.Round}}</div>
                                    {{if .OriginalName}}
                                    <div class="pick-origin">from {{.OriginalName}}</div>
                                    {{end}}
                                </div>
                                {{end}}
                            </div>
                        </div>
                    </div>
                    {{end}}

                    {{if $l.ProjectedDraftPicks}}
                    <div class="toolkit-card collapseable">
                        <div class="card-header" onclick="toggleSection('projected-picks-{{$i}}')">
                            <span class="card-title">2026 Rookie Draft Projections</span>
                            <span class="collapse-icon" id="projected-picks-{{$i}}-icon">‚ñº</span>
                        </div>
                        <div class="card-content" id="projected-picks-{{$i}}-content">
                            <div class="rookies-desc" style="font-size:0.85em;color:#9fb3d4;font-style:italic;margin-bottom:12px;">
                                Projected draft positions based on current standings. Worst record gets pick 1.01.
                            </div>
                            <table class="age-chart-table">
                                <thead>
                                    <tr>
                                        <th style="text-align:center;">Year</th>
                                        <th style="text-align:center;">Round</th>
                                        <th style="text-align:center;">Projected Pick</th>
                                        <th style="text-align:left;">Owner</th>
                                        <th style="text-align:center;">Current Standing</th>
                                        <th style="text-align:center;">Record</th>
                                    </tr>
                                </thead>
                                <tbody>
                                {{range $l.ProjectedDraftPicks}}
                                    <tr{{if .IsYours}} style="background:rgba(123,176,255,0.15);border-left:3px solid #7bb0ff;"{{end}}>
                                        <td style="text-align:center;font-weight:700;color:#7bb0ff;">{{.Year}}</td>
                                        <td style="text-align:center;">{{.Round}}</td>
                                        <td style="text-align:center;font-weight:700;color:#3ae87a;">{{.Round}}.{{printf "%02d" .ProjectedPosition}}</td>
                                        <td style="text-align:left;">
                                            {{if .OriginalOwner}}
                                                {{.OwnerName}} <span style="color:#3ae87a;font-size:0.85em;font-style:italic;">(from {{.OriginalOwner}})</span>
                                            {{else}}
                                                {{.OwnerName}}
                                            {{end}}
                                        </td>
                                        <td style="text-align:center;">{{.CurrentStanding}}</td>
                                        <td style="text-align:center;color:#9fb3d4;">{{.TeamRecord}}</td>
                                    </tr>
                                {{end}}
                                </tbody>
                            </table>
                        </div>
                    </div>
                    {{end}}

                    {{if $l.TeamAges}}
                    <div class="toolkit-card collapseable">
                        <div class="card-header" onclick="toggleSection('league-age-{{$i}}')">
                            <span class="card-title">League Age Analysis</span>
                            <span class="collapse-icon" id="league-age-{{$i}}-icon">‚ñº</span>
                        </div>
                        <div class="card-content" id="league-age-{{$i}}-content">
                            <div class="age-chart-desc" style="margin-bottom:12px;">Teams sorted by roster age (oldest to youngest)</div>
                            <table class="age-chart-table">
                                <thead>
                                    <tr>
                                        <th style="text-align:left;">Team</th>
                                        <th>Avg Age</th>
                                        <th>Wins</th>
                                        <th>Strategy</th>
                                    </tr>
                                </thead>
                                <tbody>
                                {{range $l.TeamAges}}
                                    <tr{{if .IsUserTeam}} style="background:rgba(123,176,255,0.15);border-left:3px solid #7bb0ff;"{{end}}>
                                        <td style="text-align:left;">
                                            {{if .IsUserTeam}}<b>{{.TeamName}}</b> (You){{else}}{{.TeamName}}{{end}}
                                        </td>
                                        <td>{{printf "%.1f" .AvgAge}}</td>
                                        <td>{{.Rank}}</td>
                                        <td style="white-space:nowrap;">
                                            {{if gt .AvgAge 27.0}}
                                                <span style="color:#ff9d5c;">Win Now</span>
                                            {{else if lt .AvgAge 24.5}}
                                                <span style="color:#7bb0ff;">Rebuild</span>
                                            {{else}}
                                                <span style="color:#3ae87a;">Contending</span>
                                            {{end}}
                                        </td>
                                    </tr>
                                {{end}}
                                </tbody>
                            </table>
                        </div>
                    </div>
                    {{end}}

                    {{if $l.PowerRankings}}
                    <div class="toolkit-card collapseable">
                        <div class="card-header" onclick="toggleSection('power-rankings-{{$i}}')">
                            <span class="card-title">League Power Rankings</span>
                            <span class="collapse-icon" id="power-rankings-{{$i}}-icon">‚ñº</span>
                        </div>
                        <div class="card-content" id="power-rankings-{{$i}}-content">
                            <div class="age-chart-desc" style="margin-bottom:12px;">Combined ranking based on dynasty value and current record</div>
                            <table class="age-chart-table">
                                <thead>
                                    <tr>
                                        <th style="text-align:center;">Rank</th>
                                        <th style="text-align:left;">Team</th>
                                        <th>Value</th>
                                        <th>Record</th>
                                        <th>Strategy</th>
                                    </tr>
                                </thead>
                                <tbody>
                                {{range $l.PowerRankings}}
                                    <tr{{if .IsUserTeam}} style="background:rgba(123,176,255,0.15);border-left:3px solid #7bb0ff;"{{end}}>
                                        <td style="text-align:center;font-weight:700;color:#7bb0ff;">{{.Rank}}</td>
                                        <td style="text-align:left;">
                                            {{if .IsUserTeam}}<b>{{.TeamName}}</b> (You){{else}}{{.TeamName}}{{end}}
                                        </td>
                                        <td style="font-weight:600;">{{.RosterValue}}</td>
                                        <td>{{.Wins}}-{{.Losses}}</td>
                                        <td style="white-space:nowrap;">
                                            {{if eq .Strategy "Win Now"}}
                                                <span style="color:#ff9d5c;">Win Now</span>
                                            {{else if eq .Strategy "Rebuilding"}}
                                                <span style="color:#7bb0ff;">Rebuilding</span>
                                            {{else}}
                                                <span style="color:#3ae87a;">Contending</span>
                                            {{end}}
                                        </td>
                                    </tr>
                                {{end}}
                                </tbody>
                            </table>
                        </div>
                    </div>
                    {{end}}

                    <div class="toolkit-card collapseable">
                        <div class="card-header" onclick="toggleSection('trade-targets-{{$i}}')">
                            <span class="card-title">
                                Trade Targets
                                <span class="info-icon" title="Shows teams with complementary needs based on positional value distribution. Requires clear surplus (>30%) and deficit (<15%) positions.">?</span>
                            </span>
                            <span class="collapse-icon" id="trade-targets-{{$i}}-icon">‚ñº</span>
                        </div>
                        <div class="card-content" id="trade-targets-{{$i}}-content">
                            {{if $l.TradeTargets}}
                                <div class="trade-targets-desc" style="margin-bottom:16px;font-size:0.85em;color:#9fb3d4;font-style:italic;">Potential trade partners based on positional complementarity</div>
                                {{range $l.TradeTargets}}
                                <div class="trade-target-item">
                                    <div class="target-team">{{.TeamName}}</div>
                                    <div class="target-reason">{{.Reason}}</div>
                                    <div class="target-details">
                                        <div class="surplus-row">
                                            <span class="surplus-label">You offer:</span>
                                            <span class="surplus-value">{{.YourSurplus}} ({{.YourSurplusKTC}} value)</span>
                                        </div>
                                        <div class="surplus-row">
                                            <span class="surplus-label">They offer:</span>
                                            <span class="surplus-value">{{.TheirSurplus}} ({{.TheirSurplusKTC}} value)</span>
                                        </div>
                                    </div>
                                </div>
                                {{end}}
                            {{else}}
                                <div class="empty-state">
                                    <div class="empty-state-icon">ü§ù</div>
                                    <div class="empty-state-title">No Trade Recommendations</div>
                                    <div class="empty-state-text">
                                        Your roster is well-balanced! Trade targets appear when you have a clear positional surplus (>30% of total value) and deficit (<15% of total value).
                                    </div>
                                    {{if gt $l.TotalRosterValue 0}}
                                    <div class="positional-breakdown">
                                        <div class="breakdown-title">Your Positional Breakdown</div>
                                        <div class="breakdown-grid">
                                            {{$total := $l.TotalRosterValue}}
                                            {{if gt $l.PositionalBreakdown.QB 0}}
                                            <div class="breakdown-item">
                                                <span class="breakdown-pos">QB</span>
                                                <span class="breakdown-bar-wrap">
                                                    <span class="breakdown-bar" style="width: {{printf "%.0f" (mul (div (float64 $l.PositionalBreakdown.QB) (float64 $total)) 100)}}%"></span>
                                                </span>
                                                <span class="breakdown-pct">{{printf "%.1f" (mul (div (float64 $l.PositionalBreakdown.QB) (float64 $total)) 100)}}%</span>
                                            </div>
                                            {{end}}
                                            {{if gt $l.PositionalBreakdown.RB 0}}
                                            <div class="breakdown-item">
                                                <span class="breakdown-pos">RB</span>
                                                <span class="breakdown-bar-wrap">
                                                    <span class="breakdown-bar" style="width: {{printf "%.0f" (mul (div (float64 $l.PositionalBreakdown.RB) (float64 $total)) 100)}}%"></span>
                                                </span>
                                                <span class="breakdown-pct">{{printf "%.1f" (mul (div (float64 $l.PositionalBreakdown.RB) (float64 $total)) 100)}}%</span>
                                            </div>
                                            {{end}}
                                            {{if gt $l.PositionalBreakdown.WR 0}}
                                            <div class="breakdown-item">
                                                <span class="breakdown-pos">WR</span>
                                                <span class="breakdown-bar-wrap">
                                                    <span class="breakdown-bar" style="width: {{printf "%.0f" (mul (div (float64 $l.PositionalBreakdown.WR) (float64 $total)) 100)}}%"></span>
                                                </span>
                                                <span class="breakdown-pct">{{printf "%.1f" (mul (div (float64 $l.PositionalBreakdown.WR) (float64 $total)) 100)}}%</span>
                                            </div>
                                            {{end}}
                                            {{if gt $l.PositionalBreakdown.TE 0}}
                                            <div class="breakdown-item">
                                                <span class="breakdown-pos">TE</span>
                                                <span class="breakdown-bar-wrap">
                                                    <span class="breakdown-bar" style="width: {{printf "%.0f" (mul (div (float64 $l.PositionalBreakdown.TE) (float64 $total)) 100)}}%"></span>
                                                </span>
                                                <span class="breakdown-pct">{{printf "%.1f" (mul (div (float64 $l.PositionalBreakdown.TE) (float64 $total)) 100)}}%</span>
                                            </div>
                                            {{end}}
                                        </div>
                                    </div>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    </div>

                    {{if $l.TopRookies}}
                    <div class="toolkit-card collapseable">
                        <div class="card-header" onclick="toggleSection('rookies-2025-{{$i}}')">
                            <span class="card-title">2025 NFL Draft Class</span>
                            <span class="collapse-icon" id="rookies-2025-{{$i}}-icon">‚ñº</span>
                        </div>
                        <div class="card-content" id="rookies-2025-{{$i}}-content">
                            <div class="rookies-desc" style="font-size:0.85em;color:#9fb3d4;font-style:italic;margin-bottom:12px;">Top fantasy-relevant rookies from the 2025 NFL Draft (with NFL teams)</div>
                            <table class="rookies-table">
                                <thead>
                                    <tr>
                                        <th style="text-align:center;">Rank</th>
                                        <th>Player</th>
                                        <th>Pos</th>
                                        <th>College</th>
                                        <th style="text-align:right;">Value</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {{range $l.TopRookies}}
                                    {{if eq .Year 2025}}
                                    <tr>
                                        <td style="text-align:center;font-weight:700;color:#7bb0ff;">{{.Rank}}</td>
                                        <td style="font-weight:600;">{{.Name}}</td>
                                        <td>{{.Position}}</td>
                                        <td style="font-size:0.9em;color:#9fb3d4;">{{.College}}</td>
                                        <td style="text-align:right;font-weight:600;">{{.Value}}</td>
                                    </tr>
                                    {{end}}
                                    {{end}}
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="toolkit-card collapseable">
                        <div class="card-header" onclick="toggleSection('rookies-2026-{{$i}}')">
                            <span class="card-title">2026 NFL Draft Prospects</span>
                            <span class="collapse-icon" id="rookies-2026-{{$i}}-icon">‚ñº</span>
                        </div>
                        <div class="card-content" id="rookies-2026-{{$i}}-content">
                            <div class="rookies-desc" style="font-size:0.85em;color:#9fb3d4;font-style:italic;margin-bottom:12px;">Top 2026 dynasty rookie rankings based on consensus big boards. Subject to change as the college season progresses.</div>
                            <table class="rookies-table">
                                <thead>
                                    <tr>
                                        <th style="text-align:center;">Rank</th>
                                        <th>Player</th>
                                        <th>Pos</th>
                                        <th>College</th>
                                        <th style="text-align:right;">Value</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {{range $l.TopRookies}}
                                    {{if eq .Year 2026}}
                                    <tr>
                                        <td style="text-align:center;font-weight:700;color:#7bb0ff;">{{.Rank}}</td>
                                        <td style="font-weight:600;">{{.Name}}</td>
                                        <td>{{.Position}}</td>
                                        <td style="font-size:0.9em;color:#9fb3d4;">{{.College}}</td>
                                        <td style="text-align:right;font-weight:600;">{{.Value}}</td>
                                    </tr>
                                    {{end}}
                                    {{end}}
                                </tbody>
                            </table>
                        </div>
                    </div>
                    {{end}}
                </div>
            </div>
            {{end}}

            {{if $l.TopFreeAgents}}
            <div class="fa-section {{if $l.IsDynasty}}inseason-only{{end}}">
                <div class="fa-header">Recommended Free Agents (Tier-Based)</div>
                <table class="sortable-table pretty-table">
                    <thead>
                        <tr><th>Pos</th><th>Player</th><th>Tier</th>{{if $l.IsDynasty}}<th>Dynasty Value</th>{{end}}</tr>
                    </thead>
                    <tbody>
                    {{range $l.TopFreeAgents}}
                        <tr{{if .IsUpgrade}} class="fa-upgrade"{{end}}>
                            <td>{{.Pos}}</td>
                            <td>
                                {{if .IsUpgrade}}<span class="fa-upgrade-icon">‚¨Ü</span> {{end}}{{.Name | safe}}
                                {{if .IsUpgrade}}
                                    <div style="font-size:0.85em;color:#3ae87a;margin-top:2px;">Upgrade for {{.UpgradeType}}: {{.UpgradeFor}}</div>
                                {{end}}
                            </td>
                            <td>{{.Tier}}</td>
                            {{if $l.IsDynasty}}<td>{{if .DynastyValue}}{{.DynastyValue}}{{else}}-{{end}}</td>{{end}}
                        </tr>
                    {{end}}
                    </tbody>
                </table>
            </div>
            {{end}}

            {{if $l.TopFreeAgentsByValue}}
            <div class="fa-section dynasty-only">
                <div class="fa-header">Top Available Players (Dynasty Value)</div>
                <table class="sortable-table pretty-table">
                    <thead>
                        <tr><th>Pos</th><th>Player</th><th>Dynasty Value</th></tr>
                    </thead>
                    <tbody>
                    {{range $l.TopFreeAgentsByValue}}
                        <tr{{if .IsUpgrade}} class="fa-upgrade"{{end}}>
                            <td>{{.Pos}}</td>
                            <td>
                                {{if .IsUpgrade}}<span class="fa-upgrade-icon">‚¨Ü</span> {{end}}{{.Name | safe}}
                                {{if .IsUpgrade}}
                                    <div style="font-size:0.85em;color:#3ae87a;margin-top:2px;">Upgrade for {{.UpgradeType}}: {{.UpgradeFor}}</div>
                                {{end}}
                            </td>
                            <td>{{.DynastyValue}}</td>
                        </tr>
                    {{end}}
                    </tbody>
                </table>
            </div>
            {{end}}

            <br>
        </div>
    {{end}}
</div>

<div class="legend" style="margin-top:32px; margin-bottom:24px; font-size:0.9em; color:#c5d5f0; display:flex; flex-wrap:wrap; gap:20px; align-items:center; justify-content:center; padding:16px; background:rgba(30,38,54,0.4); border-radius:12px; backdrop-filter:blur(10px); border:1px solid rgba(123,176,255,0.1);">
    <span style="font-weight:600; margin-right:8px; color:#7bb0ff; text-transform:uppercase; letter-spacing:0.5px; font-size:0.85em;">Legend:</span>
    <span style="display:inline-flex; align-items:center; gap:6px;"><span class="tier1-star">‚òÖ</span> <span style="font-weight:500;">Tier 1</span></span>
    <span style="display:inline-flex; align-items:center; gap:6px;"><span style="background:#7bb0ff;color:#1a1f2e;padding:3px 7px;border-radius:6px;font-size:0.8em;font-weight:bold;">FLEX</span> <span style="font-weight:500;">FLEX tier</span></span>
    <span style="display:inline-flex; align-items:center; gap:6px;"><span class="swap-icon">‚áÑ</span> <span style="font-weight:500;">Swap</span></span>
    <span style="display:inline-flex; align-items:center; gap:6px;"><span style="background:#3a1e1e; color:#ffb6b6; padding:3px 8px; border-radius:6px; font-weight:500;">Red</span> <span style="font-weight:500;">Suboptimal</span></span>
</div>

</div>
<script>
// Initialize default tab
if (document.getElementById('defaultTab')) document.getElementById('defaultTab').click();

// Initialize dynasty leagues to dynasty mode
{{range $i, $l := .Leagues}}
{{if $l.IsDynasty}}
(function() {
    const league = document.getElementById('league{{$i}}');
    if (league) {
        // Hide in-season content, show dynasty content
        league.querySelectorAll('.inseason-only').forEach(el => el.style.display = 'none');
        league.querySelectorAll('.dynasty-only').forEach(el => el.style.display = '');
    }
})();
{{end}}
{{end}}
</script>
<script src="/static/sortable.js"></script>
<script src="/static/theme.js"></script>
<script src="/static/cookie-consent.js"></script>

<footer style="margin-top:3em; padding:2.5em 1.5em; text-align:center; border-top:1px solid rgba(123,176,255,0.15); background:rgba(30,38,54,0.3); backdrop-filter:blur(10px);">
    <div style="margin-bottom:1.4em; font-size:0.95em; color:#c5d5f0;">
        <span style="display:inline-block; margin:0.5em 1em;">
            Tiers powered by <a href="https://www.borischen.co/" target="_blank" rel="noopener" style="color:#7bb0ff; text-decoration:none; font-weight:600; transition:color 0.2s;">Boris Chen</a>
        </span>
        {{with .Leagues}}
            {{range .}}
                {{if .IsDynasty}}
                    <span style="display:inline-block; margin:0.5em 1em;">
                        Dynasty values by <a href="https://github.com/dynastyprocess/data" target="_blank" rel="noopener" style="color:#7bb0ff; text-decoration:none; font-weight:600; transition:color 0.2s;">DynastyProcess</a>{{if .DynastyValueDate}} (updated {{.DynastyValueDate}}){{end}}
                    </span>
                    {{break}}
                {{end}}
            {{end}}
        {{end}}
        <span style="display:inline-block; margin:0.5em 1em;">
            <a href="https://github.com/wbollock/sleeperPy" target="_blank" rel="noopener" style="color:#7bb0ff; text-decoration:none; font-weight:600; transition:color 0.2s;">GitHub</a>
        </span>
        <span style="display:inline-block; margin:0.5em 1em;">
            <a href="/about" style="color:#7bb0ff; text-decoration:none; font-weight:600; transition:color 0.2s;">About</a>
        </span>
        <span style="display:inline-block; margin:0.5em 1em;">
            <a href="/faq" style="color:#7bb0ff; text-decoration:none; font-weight:600; transition:color 0.2s;">FAQ</a>
        </span>
        <span style="display:inline-block; margin:0.5em 1em;">
            <a href="/privacy" style="color:#7bb0ff; text-decoration:none; font-weight:600; transition:color 0.2s;">Privacy Policy</a>
        </span>
        <span style="display:inline-block; margin:0.5em 1em;">
            <a href="/terms" style="color:#7bb0ff; text-decoration:none; font-weight:600; transition:color 0.2s;">Terms of Service</a>
        </span>
        <span style="display:inline-block; margin:0.5em 1em;">
            <a href="https://buymeacoffee.com/wbollock" target="_blank" rel="noopener" style="color:#FFDD00; text-decoration:none; font-weight:600; transition:all 0.2s; text-shadow:0 0 8px rgba(255,221,0,0.3);">‚òï Buy Me a Coffee</a>
        </span>
    </div>
    <div style="font-size:0.88em; color:#8a9ab8;">
        If you like this project, please <a href="https://github.com/wbollock/sleeperPy" target="_blank" rel="noopener" style="color:#9aa8c0; text-decoration:none; transition:color 0.2s;">drop a ‚≠ê on GitHub</a>
    </div>
</footer>
{{end}}
</main>
<style>
    .skip-link {
        position: absolute;
        top: -100%;
        left: 16px;
        background: #0ea5e9;
        color: #fff;
        padding: 8px 16px;
        border-radius: 0 0 8px 8px;
        z-index: 1000;
        font-weight: 600;
        text-decoration: none;
    }
    .skip-link:focus {
        top: 0;
    }
    .app-header {
        width: 100%;
        background: linear-gradient(135deg, rgba(58, 110, 232, 0.15) 0%, rgba(88, 86, 214, 0.15) 100%);
        backdrop-filter: blur(20px);
        padding: 40px 0 24px 0;
        text-align: center;
        margin-bottom: 32px;
        box-shadow: 0 4px 24px rgba(0, 0, 0, 0.2);
        border-bottom: 1px solid rgba(123, 176, 255, 0.2);
    }
    .app-header .header-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        max-width: 1400px;
        margin: 0 auto;
        padding: 0 24px;
    }
    .app-header h1 {
        color: #e8eef7;
        font-family: 'Inter', 'Segoe UI', system-ui, sans-serif;
        font-size: 2.5em;
        font-weight: 700;
        letter-spacing: -0.5px;
        margin: 0;
        text-shadow: 0 2px 16px rgba(58, 110, 232, 0.3);
    }
    .user-info {
        display: flex;
        align-items: center;
        gap: 12px;
        color: #eaf0fa;
    }
    .username-display {
        font-weight: 600;
        font-size: 1.1em;
        padding: 8px 12px;
        background: rgba(255,255,255,0.15);
        border-radius: 6px;
    }
    .signout-btn {
        padding: 8px 16px;
        background: rgba(255,255,255,0.2);
        color: #eaf0fa;
        text-decoration: none;
        border-radius: 6px;
        font-weight: 600;
        transition: background 0.2s ease;
    }
    .signout-btn:hover {
        background: rgba(255,255,255,0.3);
    }
    @media (max-width: 768px) {
        .app-header .header-content {
            flex-direction: column;
            gap: 16px;
        }
        .app-header h1 {
            font-size: 1.8em;
        }
        .user-info {
            flex-direction: column;
            gap: 8px;
        }
    }
    .main-content {
        max-width: 1400px;
        margin: 0 auto;
        padding: 32px 24px 24px 24px;
        background: rgba(30, 38, 54, 0.4);
        backdrop-filter: blur(20px);
        border-radius: 16px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        border: 1px solid rgba(123, 176, 255, 0.1);
    }
.fa-section {
    margin-top: 2em;
    margin-bottom: 1.5em;
}
@media (min-width: 1200px) {
    .league-grid-container .fa-section {
        grid-column: 1 / -1;
    }
}
.fa-header {
    font-size: 1.2em;
    font-weight: 700;
    margin-bottom: 1em;
    color: #7bb0ff;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    text-align: center;
    padding: 12px;
    background: rgba(123, 176, 255, 0.08);
    border-radius: 10px;
    border: 1px solid rgba(123, 176, 255, 0.15);
}
.fa-upgrade {
    background: linear-gradient(90deg, rgba(58, 232, 122, 0.12) 0%, rgba(30, 58, 46, 0.25) 100%) !important;
    border-left: 3px solid #3ae87a;
}
.fa-upgrade-icon {
    color: #3ae87a;
    font-weight: bold;
    font-size: 1.25em;
    margin-right: 6px;
    filter: drop-shadow(0 0 4px rgba(58, 232, 122, 0.4));
}
.mode-toggle-container {
    margin-bottom: 32px;
    text-align: center;
    padding-top: 8px;
}
.mode-toggle {
    display: inline-flex;
    background: rgba(30, 38, 54, 0.6);
    border-radius: 12px;
    padding: 4px;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
    border: 1px solid rgba(123, 176, 255, 0.2);
}
.mode-btn {
    background: transparent;
    border: none;
    color: #9fb3d4;
    padding: 12px 32px;
    font-size: 0.95em;
    font-weight: 600;
    cursor: pointer;
    border-radius: 8px;
    transition: all 0.3s ease;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}
.mode-btn:hover {
    color: #c5d5f0;
    background: rgba(123, 176, 255, 0.1);
}
.mode-btn.active {
    background: linear-gradient(135deg, rgba(123, 176, 255, 0.3) 0%, rgba(88, 86, 214, 0.3) 100%);
    color: #e8eef7;
    box-shadow: 0 2px 8px rgba(123, 176, 255, 0.3);
}
.mode-description {
    margin-top: 12px;
    font-size: 0.9em;
    color: #8a9ab8;
    font-style: italic;
}
.toolkit-card {
    background: rgba(30, 38, 54, 0.5);
    border-radius: 12px;
    border: 1px solid rgba(123, 176, 255, 0.15);
    overflow: hidden;
}
.card-header {
    padding: 16px;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: background 0.2s ease;
    user-select: none;
}
.card-header:hover {
    background: rgba(123, 176, 255, 0.08);
}
.card-title {
    font-size: 1.15em;
    font-weight: 700;
    color: #7bb0ff;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}
.collapse-icon {
    color: #9fb3d4;
    font-size: 0.9em;
    transition: transform 0.2s ease;
}
.card-content {
    padding: 0 16px 16px 16px;
}
.age-chart-desc {
    font-size: 0.85em;
    color: #9fb3d4;
    font-style: italic;
}
.age-chart-table {
    width: 100%;
    border-collapse: collapse;
}
.age-chart-table thead th {
    background: rgba(123, 176, 255, 0.1);
    padding: 10px;
    font-size: 0.9em;
    font-weight: 600;
    color: #c5d5f0;
    border-bottom: 2px solid rgba(123, 176, 255, 0.2);
}
.age-chart-table tbody tr {
    border-bottom: 1px solid rgba(123, 176, 255, 0.05);
    transition: background 0.2s ease;
}
.age-chart-table tbody tr:hover {
    background: rgba(123, 176, 255, 0.08);
}
.age-chart-table tbody td {
    padding: 12px 10px;
    font-size: 0.95em;
    color: #e8eef7;
    text-align: center;
}
.draft-picks-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
    gap: 12px;
}
.draft-pick-card {
    background: rgba(123, 176, 255, 0.08);
    border: 1px solid rgba(123, 176, 255, 0.2);
    border-radius: 8px;
    padding: 12px;
    text-align: center;
    transition: all 0.2s ease;
}
.draft-pick-card:hover {
    background: rgba(123, 176, 255, 0.12);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}
.draft-pick-card.traded-pick {
    border-color: #3ae87a;
    background: rgba(58, 232, 122, 0.08);
}
.draft-pick-card.traded-pick:hover {
    background: rgba(58, 232, 122, 0.12);
}
.pick-year {
    font-size: 1.3em;
    font-weight: 700;
    color: #7bb0ff;
    margin-bottom: 4px;
}
.draft-pick-card.traded-pick .pick-year {
    color: #3ae87a;
}
.pick-round {
    font-size: 0.95em;
    color: #c5d5f0;
    font-weight: 500;
}
.pick-origin {
    font-size: 0.8em;
    color: #9fb3d4;
    margin-top: 6px;
    font-style: italic;
}
.trade-target-item {
    background: rgba(123, 176, 255, 0.06);
    border: 1px solid rgba(123, 176, 255, 0.15);
    border-radius: 8px;
    padding: 14px;
    margin-bottom: 12px;
    transition: all 0.2s ease;
}
.trade-target-item:last-child {
    margin-bottom: 0;
}
.trade-target-item:hover {
    background: rgba(123, 176, 255, 0.1);
    border-color: rgba(123, 176, 255, 0.25);
    transform: translateX(4px);
}
.target-team {
    font-size: 1.1em;
    font-weight: 700;
    color: #e8eef7;
    margin-bottom: 8px;
}
.target-reason {
    font-size: 0.9em;
    color: #3ae87a;
    margin-bottom: 12px;
    font-style: italic;
}
.target-details {
    display: flex;
    flex-direction: column;
    gap: 6px;
}
.surplus-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 0.9em;
    padding: 6px 0;
    border-top: 1px solid rgba(123, 176, 255, 0.1);
}
.surplus-label {
    color: #9fb3d4;
    font-weight: 500;
}
.surplus-value {
    color: #c5d5f0;
    font-weight: 600;
}
.info-icon {
    display: inline-block;
    margin-left: 8px;
    width: 18px;
    height: 18px;
    background: rgba(123, 176, 255, 0.2);
    color: #7bb0ff;
    border-radius: 50%;
    font-size: 0.7em;
    font-weight: 700;
    text-align: center;
    line-height: 18px;
    cursor: help;
    transition: all 0.2s ease;
}
.info-icon:hover {
    background: rgba(123, 176, 255, 0.4);
    transform: scale(1.1);
}
.empty-state {
    text-align: center;
    padding: 32px 16px;
}
.empty-state-icon {
    font-size: 3em;
    margin-bottom: 16px;
    opacity: 0.6;
}
.empty-state-title {
    font-size: 1.1em;
    font-weight: 600;
    color: #c5d5f0;
    margin-bottom: 12px;
}
.empty-state-text {
    font-size: 0.9em;
    color: #9fb3d4;
    line-height: 1.6;
    max-width: 400px;
    margin: 0 auto 24px;
}
.positional-breakdown {
    background: rgba(123, 176, 255, 0.05);
    border: 1px solid rgba(123, 176, 255, 0.15);
    border-radius: 8px;
    padding: 16px;
    margin-top: 16px;
}
.breakdown-title {
    font-size: 0.95em;
    font-weight: 600;
    color: #7bb0ff;
    margin-bottom: 12px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}
.breakdown-grid {
    display: flex;
    flex-direction: column;
    gap: 10px;
}
.breakdown-item {
    display: grid;
    grid-template-columns: 40px 1fr 60px;
    align-items: center;
    gap: 12px;
}
.breakdown-pos {
    font-weight: 600;
    color: #c5d5f0;
    font-size: 0.9em;
}
.breakdown-bar-wrap {
    background: rgba(30, 38, 54, 0.6);
    border-radius: 4px;
    height: 20px;
    overflow: hidden;
}
.breakdown-bar {
    display: block;
    height: 100%;
    background: linear-gradient(90deg, rgba(123, 176, 255, 0.6) 0%, rgba(123, 176, 255, 0.8) 100%);
    border-radius: 4px;
    transition: width 0.3s ease;
}
.breakdown-pct {
    font-size: 0.9em;
    color: #9fb3d4;
    font-weight: 500;
    text-align: right;
}
.news-feed {
    max-height: 500px;
    overflow-y: auto;
}
.news-item {
    padding: 12px;
    margin-bottom: 8px;
    background: rgba(30, 38, 54, 0.5);
    border-left: 3px solid rgba(123, 176, 255, 0.3);
    border-radius: 4px;
    transition: all 0.2s ease;
}
.news-item:hover {
    background: rgba(30, 38, 54, 0.7);
    border-left-color: rgba(123, 176, 255, 0.5);
}
.news-item.news-injury {
    border-left-color: rgba(255, 123, 123, 0.6);
    background: rgba(255, 123, 123, 0.05);
}
.news-item.news-injury:hover {
    background: rgba(255, 123, 123, 0.1);
}
.news-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 6px;
    gap: 12px;
}
.news-player {
    font-weight: 600;
    color: #7bb0ff;
    font-size: 0.95em;
}
.starter-badge {
    font-size: 0.8em;
    margin-left: 4px;
    color: #ffc83a;
}
.news-time {
    font-size: 0.85em;
    color: #9fb3d4;
    white-space: nowrap;
}
.news-injury-status {
    display: inline-block;
    padding: 2px 8px;
    margin-bottom: 6px;
    font-size: 0.85em;
    font-weight: 600;
    background: rgba(255, 123, 123, 0.2);
    color: #ff7b7b;
    border-radius: 4px;
}
.news-text {
    color: #d4dde8;
    line-height: 1.5;
    margin-bottom: 4px;
    font-size: 0.92em;
}
.news-source {
    font-size: 0.8em;
    color: #9fb3d4;
    font-style: italic;
}
.news-count {
    display: inline-block;
    padding: 2px 8px;
    margin-left: 8px;
    background: rgba(123, 176, 255, 0.2);
    border-radius: 10px;
    font-size: 0.8em;
    font-weight: 600;
}
.breakout-desc, .aging-desc {
    font-size: 0.85em;
    color: #9fb3d4;
    font-style: italic;
    margin-bottom: 12px;
}
.player-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
}
.player-card {
    background: rgba(30, 38, 54, 0.5);
    border-radius: 8px;
    padding: 12px;
    transition: all 0.2s ease;
}
.player-card:hover {
    background: rgba(30, 38, 54, 0.7);
    transform: translateX(4px);
}
.breakout-card {
    border-left: 3px solid rgba(58, 232, 122, 0.5);
}
.breakout-card:hover {
    border-left-color: rgba(58, 232, 122, 0.8);
    box-shadow: 0 2px 8px rgba(58, 232, 122, 0.2);
}
.aging-card {
    border-left: 3px solid rgba(255, 157, 92, 0.5);
}
.aging-card:hover {
    border-left-color: rgba(255, 157, 92, 0.8);
    box-shadow: 0 2px 8px rgba(255, 157, 92, 0.2);
}
.player-card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
}
.player-card-name {
    font-weight: 600;
    color: #e8eef7;
    font-size: 0.95em;
}
.player-card-age {
    font-size: 0.85em;
    color: #3ae87a;
    font-weight: 600;
    background: rgba(58, 232, 122, 0.15);
    padding: 2px 8px;
    border-radius: 4px;
}
.aging-age {
    color: #ff9d5c;
    background: rgba(255, 157, 92, 0.15);
}
.player-card-details {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 0.85em;
}
.player-card-pos {
    color: #7bb0ff;
    font-weight: 600;
}
.player-card-value {
    color: #9fb3d4;
}
.aging-warning {
    margin-top: 8px;
    font-size: 0.8em;
    color: #ff9d5c;
    font-style: italic;
}
.breakout-count, .aging-count {
    display: inline-block;
    padding: 2px 8px;
    margin-left: 8px;
    background: rgba(58, 232, 122, 0.2);
    border-radius: 10px;
    font-size: 0.8em;
    font-weight: 600;
}
.aging-count {
    background: rgba(255, 157, 92, 0.2);
}
.transaction-filters {
    display: flex;
    gap: 8px;
    margin-bottom: 16px;
    flex-wrap: wrap;
}
.filter-btn {
    background: rgba(123, 176, 255, 0.08);
    border: 1px solid rgba(123, 176, 255, 0.2);
    border-radius: 6px;
    padding: 8px 16px;
    color: #9fb3d4;
    font-size: 0.9em;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
}
.filter-btn:hover {
    background: rgba(123, 176, 255, 0.15);
    border-color: rgba(123, 176, 255, 0.3);
    color: #c5d5f0;
}
.filter-btn.active {
    background: linear-gradient(90deg, rgba(123, 176, 255, 0.25) 0%, rgba(88, 86, 214, 0.25) 100%);
    border-color: rgba(123, 176, 255, 0.4);
    color: #7bb0ff;
    box-shadow: 0 2px 8px rgba(123, 176, 255, 0.2);
}
.transactions-list {
    max-height: 500px;
    overflow-y: auto;
}
.transactions-count {
    display: inline-block;
    padding: 2px 8px;
    margin-left: 8px;
    background: rgba(123, 176, 255, 0.2);
    border-radius: 10px;
    font-size: 0.8em;
    font-weight: 600;
}
.transaction-item {
    padding: 12px;
    margin-bottom: 10px;
    background: rgba(30, 38, 54, 0.5);
    border-left: 3px solid rgba(123, 176, 255, 0.3);
    border-radius: 4px;
    transition: all 0.2s ease;
}
.transaction-item:hover {
    background: rgba(30, 38, 54, 0.7);
    border-left-color: rgba(123, 176, 255, 0.5);
}
.transaction-item:last-child {
    margin-bottom: 0;
}
.transaction-trade {
    border-left-color: rgba(123, 176, 255, 0.6);
}
.transaction-trade:hover {
    border-left-color: rgba(123, 176, 255, 0.8);
    box-shadow: 0 2px 8px rgba(123, 176, 255, 0.2);
}
.transaction-waiver {
    border-left-color: rgba(255, 157, 92, 0.6);
}
.transaction-waiver:hover {
    border-left-color: rgba(255, 157, 92, 0.8);
    box-shadow: 0 2px 8px rgba(255, 157, 92, 0.2);
}
.transaction-free_agent {
    border-left-color: rgba(58, 232, 122, 0.6);
}
.transaction-free_agent:hover {
    border-left-color: rgba(58, 232, 122, 0.8);
    box-shadow: 0 2px 8px rgba(58, 232, 122, 0.2);
}
.transaction-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
    gap: 12px;
}
.transaction-type {
    font-weight: 600;
    color: #c5d5f0;
    font-size: 0.95em;
}
.transaction-time {
    font-size: 0.85em;
    color: #9fb3d4;
    white-space: nowrap;
}
.transaction-desc {
    color: #d4dde8;
    line-height: 1.5;
    margin-bottom: 6px;
    font-size: 0.92em;
}
.transaction-players {
    font-size: 0.85em;
    color: #7bb0ff;
    font-style: italic;
}
.trade-details {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-top: 12px;
    padding: 12px;
    background: rgba(123, 176, 255, 0.05);
    border-radius: 6px;
}
.trade-side {
    flex: 1;
}
.trade-team {
    font-weight: 700;
    color: #c5d5f0;
    margin-bottom: 8px;
    font-size: 0.95em;
}
.trade-gave {
    font-size: 0.9em;
    line-height: 1.6;
}
.trade-label {
    font-weight: 600;
    margin-right: 6px;
}
.trade-label.gave {
    color: #ff9d5c;
}
.trade-label.got {
    color: #3ae87a;
}
.trade-divider {
    color: #7bb0ff;
    font-size: 1.5em;
    font-weight: 700;
}
.waiver-details {
    margin-top: 8px;
    padding: 8px 0;
}
.waiver-team {
    font-weight: 600;
    color: #7bb0ff;
    margin-bottom: 6px;
    font-size: 0.95em;
}
.waiver-action {
    padding: 4px 0;
    font-size: 0.9em;
}
.waiver-label {
    font-weight: 600;
    margin-right: 6px;
}
.waiver-label.gave {
    color: #ff9d5c;
}
.waiver-label.got {
    color: #3ae87a;
}
@media (max-width: 768px) {
    .trade-details {
        flex-direction: column;
        gap: 12px;
    }
    .trade-divider {
        transform: rotate(90deg);
    }
}
.rookies-table {
    width: 100%;
    border-collapse: collapse;
}
.rookies-table thead th {
    background: rgba(123, 176, 255, 0.1);
    padding: 10px;
    font-size: 0.9em;
    font-weight: 600;
    color: #c5d5f0;
    border-bottom: 2px solid rgba(123, 176, 255, 0.2);
}
.rookies-table tbody tr {
    border-bottom: 1px solid rgba(123, 176, 255, 0.05);
    transition: background 0.2s ease;
}
.rookies-table tbody tr:hover {
    background: rgba(123, 176, 255, 0.08);
}
.rookies-table tbody td {
    padding: 12px 10px;
    font-size: 0.95em;
    color: #e8eef7;
}
.league-info-bar {
    display: flex;
    align-items: center;
    justify-content: center;
    flex-wrap: wrap;
    gap: 4px;
    padding: 8px 16px;
    margin-bottom: 16px;
    font-size: 0.85em;
    color: #9fb3d4;
    background: rgba(123, 176, 255, 0.06);
    border-radius: 8px;
    border: 1px solid rgba(123, 176, 255, 0.1);
}
.league-info-sep { color: rgba(123, 176, 255, 0.3); margin: 0 4px; }
.dynasty-badge { color: #ffc83a; font-weight: 600; }
.league-info-slots { color: #7a8ba8; font-size: 0.95em; }
.league-selector-container {
    margin-bottom: 32px;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
}
.league-selector {
    position: relative;
}
.league-dropdown-btn {
    width: 100%;
    background: linear-gradient(135deg, rgba(123, 176, 255, 0.15) 0%, rgba(88, 86, 214, 0.15) 100%);
    border: 2px solid rgba(123, 176, 255, 0.3);
    border-radius: 12px;
    padding: 16px 20px;
    color: #e8eef7;
    font-size: 1.05em;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: all 0.3s ease;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
}
.league-dropdown-btn:hover {
    background: linear-gradient(135deg, rgba(123, 176, 255, 0.25) 0%, rgba(88, 86, 214, 0.25) 100%);
    border-color: rgba(123, 176, 255, 0.5);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
    transform: translateY(-2px);
}
.current-league-name {
    flex: 1;
    text-align: left;
    color: #7bb0ff;
}
.league-count {
    font-size: 0.85em;
    color: #9fb3d4;
    margin: 0 12px;
}
.dropdown-arrow {
    color: #7bb0ff;
    font-size: 0.9em;
    transition: transform 0.3s ease;
}
.league-dropdown-menu {
    position: absolute;
    top: calc(100% + 8px);
    left: 0;
    right: 0;
    background: rgba(30, 38, 54, 0.98);
    backdrop-filter: blur(20px);
    border: 2px solid rgba(123, 176, 255, 0.3);
    border-radius: 12px;
    max-height: 500px;
    overflow-y: auto;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
    z-index: 1000;
}
.league-search {
    width: calc(100% - 24px);
    margin: 12px;
    padding: 12px 16px;
    background: rgba(123, 176, 255, 0.08);
    border: 1px solid rgba(123, 176, 255, 0.2);
    border-radius: 8px;
    color: #e8eef7;
    font-size: 0.95em;
    outline: none;
    transition: all 0.2s ease;
}
.league-search::placeholder {
    color: #9fb3d4;
}
.league-search:focus {
    background: rgba(123, 176, 255, 0.12);
    border-color: rgba(123, 176, 255, 0.4);
    box-shadow: 0 0 0 3px rgba(123, 176, 255, 0.1);
}
.league-options {
    padding: 0 8px 12px 8px;
}
.league-group {
    margin-bottom: 16px;
}
.league-group:last-child {
    margin-bottom: 0;
}
.league-group-header {
    padding: 10px 12px;
    font-size: 0.85em;
    font-weight: 700;
    color: #7bb0ff;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    background: rgba(123, 176, 255, 0.08);
    border-radius: 6px;
    margin-bottom: 8px;
}
.league-option {
    width: 100%;
    background: transparent;
    border: none;
    border-radius: 6px;
    padding: 12px 14px;
    color: #c5d5f0;
    font-size: 0.95em;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: all 0.2s ease;
    text-align: left;
    margin-bottom: 4px;
}
.league-option:hover {
    background: rgba(123, 176, 255, 0.15);
    color: #e8eef7;
    transform: translateX(4px);
}
.league-option.active {
    background: linear-gradient(90deg, rgba(123, 176, 255, 0.25) 0%, rgba(88, 86, 214, 0.25) 100%);
    color: #7bb0ff;
    font-weight: 600;
}
.league-option-name {
    flex: 1;
}
.league-option-actions {
    display: flex;
    align-items: center;
    gap: 8px;
}
.league-option-type {
    font-size: 0.85em;
    color: #9fb3d4;
}
.favorite-star {
    font-size: 1.1em;
    color: #ffc83a;
    cursor: pointer;
    transition: all 0.2s ease;
    padding: 4px;
    line-height: 1;
    user-select: none;
}
.favorite-star:hover {
    transform: scale(1.2);
    filter: drop-shadow(0 0 6px rgba(255, 200, 58, 0.6));
}
@media (max-width: 768px) {
    .league-selector-container {
        max-width: 100%;
    }
    .league-dropdown-btn {
        padding: 14px 16px;
        font-size: 0.95em;
    }
    .current-league-name {
        font-size: 0.9em;
    }
    .league-count {
        font-size: 0.8em;
    }
}
</style>
</body>
</html>
